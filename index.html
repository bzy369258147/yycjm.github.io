<head>
<title>YYC's JM Class</title>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://example.com/MathJax.js?config=TeX-AMS_CHTML">
</script>
</head>
<body>
<h1>yyc的健美小站</h1>
<embed src="russian.swf" width="300" height="220"></embed>
		<canvas id="canvas" width="140" height="200" style="background: Black"></canvas>
	<script>
		var scr=document.getElementById("canvas").getContext("2d");
		var scr_w=140,scr_h=200,px=70,py=180,pw=4,ph=4,cnt;
		var bullet=[1,1],buldir=[1,1],bulletcnt=1;

		function draw(x,y,w,h,c)
		{  
            scr.fillStyle=c;
            scr.fillRect(~~(x+w/2),~~(y+h/2),w,h);
        } 
		
		var key_pressed={};

		document.addEventListener("keyup",function(e)
		{
			key_pressed[e.keyCode]=false;
		});

		document.addEventListener("keydown",function(e)
		{
			key_pressed[e.keyCode]=true;
		});

		function sqr(x){return x*x;}
		
		function dist(x1,y1,x2,y2){return sqr(Math.abs(x1-x2))+sqr(Math.abs(y1-y2));}

		function mian()
		{
			cnt=1;
			while(bulletcnt<100 && cnt)
			{
				cnt--;
				bullet.push(Math.random()*400);
				bullet.push(Math.random()*10);
				buldir.push((Math.random()<0.5?1:-1)*Math.random());
				buldir.push((Math.random()+1)*1.5);
				bulletcnt=bulletcnt+1;
			}

			for(var i=0;i<bullet.length;i+=2)
			{
				if(dist(bullet[i],bullet[i+1],px,py)<6)
					return alert("Game Over");

				draw(bullet[i],bullet[i+1],4,4,"Black");

				bullet[i]+=buldir[i];
				bullet[i+1]+=buldir[i+1];
				
				if(~~(bullet[i])==~~(px) && ~~(bullet[i+1])==~~(py))
					return alert("Game Over");

				if(bullet[i]<0 || scr_w<bullet[i] || bullet[i+1]<0 || scr_h<bullet[i+1])
				{
					bullet.splice(i,2);
					buldir.splice(i,2);
					bulletcnt--;
				}
				else
					draw(bullet[i],bullet[i+1],4,4,"White");
			}
			
			draw(px,py,pw,ph,"Black");

			tmp=px;
			if(key_pressed[37] || key_pressed[74])
				tmp-=2;
			if(key_pressed[39] || key_pressed[76])
				tmp+=2;
			px=(tmp<scr_w-pw && tmp>pw)?tmp:px;

			tmp=py;
			if(key_pressed[38] || key_pressed[73])
				tmp-=2;
			if(key_pressed[40] || key_pressed[75])
				tmp+=2;
			py=(tmp<scr_h-ph && tmp>ph)?tmp:py;

			draw(px,py,pw,ph,"Lime");

			setTimeout(arguments.callee,16);  
        };  

		function cls()
		{
			scr.clearRect(0,0,140,200);
			for(var i=0;i<4;i++)
			{
				key_pressed[i+37]=false;
				key_pressed[i+73]=false;
			}
		}

		document.onkeydown=function(e)
		{
			if(e.keyCode==82)
			{
				while(bulletcnt)
				{
					bullet.pop();
					bullet.pop();
					buldir.pop();
					buldir.pop();
					bulletcnt--;
				}
				px=70;
				py=180;
				cls();
				mian();
			}
		}
	</script>
	
	<p>press R to start,use I,J,K,L to move </p>
</li>

<p>Powered by <a href="http://blog.csdn.net/henyouyisiba123">YYC</a></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=445153312&auto=1&height=66"></iframe>
</body>
